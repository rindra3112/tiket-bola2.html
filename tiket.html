<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Tiket Bola + QR Code</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body {
      background: linear-gradient(to bottom right, #3b82f6, #ffffff);
    }

    .overlay {
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 1rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .seat {
      display: inline-block;
      width: 40px;
      height: 40px;
      margin: 4px;
      text-align: center;
      line-height: 40px;
      border-radius: 6px;
      background-color: #e5e7eb;
      cursor: pointer;
    }

    .seat.selected {
      background-color: #3b82f6;
      color: white;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6">
  <div class="max-w-xl w-full p-8 overlay">
    <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">ðŸŽ« Tiket Bola + QR Code</h1>

    <div class="mb-4">
      <label for="match" class="block text-gray-700 font-semibold">Pilih Pertandingan</label>
      <select id="match" class="mt-2 w-full px-4 py-2 border border-gray-300 rounded-md">
        <option value="Liverpool vs Manchester United">Liverpool vs Manchester United</option>
        <option value="Barcelona vs Real Madrid">Barcelona vs Real Madrid</option>
        <option value="PSG vs Manchester City">PSG vs Manchester City</option>
      </select>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Pilih Bangku (max 5)</label>
      <div id="seats" class="grid grid-cols-5 gap-2 mt-2">
        <!-- Bangku akan ditambahkan dengan JS -->
      </div>
    </div>

    <button onclick="beliTiket()" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
      Beli Tiket
    </button>

    <div id="output" class="mt-6 p-4 bg-green-100 border border-green-400 text-green-800 rounded-md hidden">
      <h2 class="text-lg font-semibold mb-2">âœ… Ringkasan & QR Code</h2>
      <p id="ringkasan" class="mb-4"></p>
      <div id="qrcode" class="flex justify-center"></div>
    </div>
  </div>

  <footer class="mt-10 text-sm text-black text-center">
    &copy; 2025 TiketBola | Desain oleh Rindra Athalla
  </footer>

  <script>
    const seatPrices = {};
    const maxSelection = 5;

    function createSeats() {
      const container = document.getElementById("seats");
      const rows = ["A", "B", "C"];

      rows.forEach(row => {
        for (let i = 1; i <= 10; i++) {
          const seatId = `${row}${i}`;
          const btn = document.createElement("div");
          btn.className = "seat";
          btn.textContent = seatId;

          let price = 0;
          if (row === "A") price = 100000;
          else if (row === "B") price = 85000;
          else if (row === "C") price = 70000;

          seatPrices[seatId] = price;

          btn.addEventListener("click", () => {
            btn.classList.toggle("selected");
            const selected = document.querySelectorAll(".seat.selected");
            if (selected.length > maxSelection) {
              btn.classList.remove("selected");
              alert("Maksimal 5 bangku!");
            }
          });

          container.appendChild(btn);
        }
      });
    }

    function beliTiket() {
      const match = document.getElementById("match").value;
      const selectedSeats = [...document.querySelectorAll(".seat.selected")].map(el => el.textContent);

      if (selectedSeats.length === 0) {
        alert("Pilih minimal 1 bangku.");
        return;
      }

      let total = 0;
      selectedSeats.forEach(seat => total += seatPrices[seat]);

      const ringkasanHTML = `
        Pertandingan: <strong>${match}</strong><br>
        Bangku: ${selectedSeats.join(", ")}<br>
        Jumlah tiket: ${selectedSeats.length}<br>
        <strong>Total bayar: Rp${total.toLocaleString()}</strong>
      `;

      document.getElementById("ringkasan").innerHTML = ringkasanHTML;
      document.getElementById("output").classList.remove("hidden");

      const qrData = `TIKET|${match}|${selectedSeats.length} tiket|Bangku: ${selectedSeats.join(", ")}|Total: Rp${total.toLocaleString()}`;
      const qrDiv = document.getElementById("qrcode");
      qrDiv.innerHTML = "";

      new QRCode(qrDiv, {
        text: qrData,
        width: 200,
        height: 200,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
      });
    }

    // Inisialisasi
    createSeats();
  </script>
</body>
</html>
